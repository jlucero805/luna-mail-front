(this["webpackJsonpluna-mail-front"]=this["webpackJsonpluna-mail-front"]||[]).push([[0],{22:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t(16),c=t.n(r),i=t(2),s=t.n(i),l=t(5),o=t(3),u=(t(22),t(0)),d=function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"sidebar",children:[Object(u.jsx)("div",{onClick:function(){return e.newMailClickHandler("newMail")},className:"new-mail-btn bar-btn",children:Object(u.jsx)("p",{className:"btn-text",children:"New Mail"})}),Object(u.jsx)("div",{onClick:function(){return e.inboxClickHandler()},className:"inbox-btn bar-btn",children:Object(u.jsx)("p",{className:"btn-text",children:"Inbox"})}),Object(u.jsx)("div",{className:"sent-btn bar-btn",children:Object(u.jsx)("p",{className:"btn-text",children:"Sent"})}),Object(u.jsx)("div",{className:"contacts-btn bar-btn",children:Object(u.jsx)("p",{className:"btn-text",children:"Contacts"})}),Object(u.jsx)("div",{className:"logout-btn bar-btn",children:Object(u.jsx)("p",{className:"btn-text",children:"Logout"})})]})})},j=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"content-header",children:Object(u.jsx)("p",{className:"content-header-text",children:"inbox"})}),Object(u.jsx)("div",{className:"content-header-refresh",children:Object(u.jsx)("p",{onClick:e.refreshHandler,className:"content-header-refresh-text",children:"refresh"})}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{className:"content-mail",children:void 0!==e.userMail?e.userMail.map((function(n){return Object(u.jsxs)("div",{onClick:function(){return e.mailClickHandler(n)},className:"content-mail-obj",children:[Object(u.jsx)("p",{className:"content-mail-obj-from",children:n.from}),Object(u.jsx)("p",{className:"content-mail-obj-title",children:n.title}),Object(u.jsx)("p",{className:"content-mail-obj-date",children:n.dateSent})]},n._id)})):null})]})},b=function(e){var n=e.mail;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"content-header",children:Object(u.jsx)("p",{className:"content-header-text",children:void 0!==n.title?n.title:null})}),Object(u.jsx)("div",{className:"mail-recipient",children:Object(u.jsxs)("p",{className:"content-header-text",children:["from: ",void 0!==n.from?n.from:null]})}),Object(u.jsx)("div",{className:"mail-detail-content",children:Object(u.jsx)("p",{children:void 0!==n.content?n.content:null})})]})},m=t(6),h=t.n(m),p=function(e){var n=function(){var n=Object(l.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.get("https://agile-garden-69829.herokuapp.com/api/users");case 2:if(!n.sent.data.find((function(n){return n.username===e.rval}))){n.next=7;break}return n.abrupt("return",e.mailSender());case 7:alert("that user does not exist");case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"content-new-mail-header",children:[Object(u.jsx)("p",{className:"content-new-mail-header-recipient",children:"recipient:"}),Object(u.jsx)("input",{value:e.rval,onChange:function(n){return function(n){return e.recipientChanger(n)}(n.target.value)},className:"content-new-mail-recipient-input"})]}),Object(u.jsxs)("div",{className:"content-new-mail-header",children:[Object(u.jsx)("p",{className:"content-new-mail-header-title",children:"title:"}),Object(u.jsx)("input",{value:e.tval,onChange:function(n){return function(n){return e.titleChanger(n)}(n.target.value)},className:"content-new-mail-recipient-input"})]}),Object(u.jsxs)("div",{className:"content-new-mail-navbar",children:[Object(u.jsx)("div",{onClick:n,className:"content-new-mail-btn",children:"send"}),Object(u.jsx)("div",{onClick:function(){return e.returnClickHandler()},className:"content-new-mail-btn",children:"return"})]}),Object(u.jsx)("textarea",{value:e.val,onChange:function(n){return function(n){return e.mailBodyChanger(n)}(n.target.value)},className:"content-new-mail-input"})]})},x=function(e){var n=e.page,t=Object(a.useState)({}),r=Object(o.a)(t,2),c=r[0],i=r[1],d=Object(a.useState)(""),m=Object(o.a)(d,2),x=m[0],f=m[1],O=Object(a.useState)((function(){return""})),v=Object(o.a)(O,2),g=v[0],N=v[1],k=Object(a.useState)((function(){return""})),C=Object(o.a)(k,2),w=C[0],H=C[1],S=function(){var n=Object(l.a)(s.a.mark((function n(){var t,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={from:e.user.username,to:x,title:w,content:g,dateSent:new Date},a=h.a.post("".concat("https://agile-garden-69829.herokuapp.com","/api/mail"),t),console.log(a.data),f(""),N(""),H(""),n.abrupt("return",e.inboxClickHandler());case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return"mail"===n?Object(u.jsx)("div",{className:"content",children:Object(u.jsx)(j,{refreshHandler:e.refreshHandler,mailClickHandler:function(n){return console.log(n),i(n),e.mailClickHandler()},userMail:e.userMail})}):"mailDetail"===n?Object(u.jsx)("div",{className:"content",children:Object(u.jsx)(b,{mail:c})}):"newMail"===n?Object(u.jsx)("div",{className:"content",children:Object(u.jsx)(p,{titleChanger:function(e){console.log(e),H(e)},mailSender:S,recipientChanger:function(e){console.log(e),f(e)},tval:w,rval:x,val:g,mailBodyChanger:function(e){console.log(e),N(e)},returnClickHandler:function(){return e.returnClickHandler()}})}):void 0},f=function(e){var n=Object(a.useState)("mail"),t=Object(o.a)(n,2),r=t[0],c=t[1],i=function(){c("mail")};return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"main",children:[Object(u.jsx)(d,{inboxClickHandler:i,newMailClickHandler:function(e){c(e)}}),Object(u.jsx)(x,{inboxClickHandler:i,refreshHandler:e.refreshHandler,user:e.user,mailClickHandler:function(){c("mailDetail")},returnClickHandler:function(){c("mail")},page:r,userMail:e.userMail})]})})},O=(t(42),t.p+"static/media/crescent-moon-moon-svgrepo-com.0e0cc7fb.svg"),v=function(e){var n=Object(a.useState)(""),t=Object(o.a)(n,2),r=t[0],c=t[1],i=Object(a.useState)(""),d=Object(o.a)(i,2),j=d[0],b=d[1],m=function(){var n=Object(l.a)(s.a.mark((function n(){var t,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("clicked"),t={username:r,passHash:j},n.next=4,h.a.post("".concat("https://agile-garden-69829.herokuapp.com","/api/users/login"),t);case 4:if(a=n.sent,console.log(a.data),void 0!==a.data.error){n.next=12;break}return console.log("not errer"),console.log("resdata",a.data),n.abrupt("return",e.loginClickHandler(a.data,r));case 12:"error"===a.data.error&&b("");case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"login",children:[Object(u.jsx)("img",{src:O,className:"login-logo"}),Object(u.jsx)("input",{onChange:function(e){return n=e.target.value,void c(n);var n},className:"login-username"}),Object(u.jsx)("input",{value:j,onKeyPress:function(e){"Enter"===e.key&&m()},onChange:function(e){return n=e.target.value,void b(n);var n},type:"password",name:"password",className:"login-password"}),Object(u.jsx)("div",{onClick:function(e){return m(e.key)},className:"login-button",children:"login"})]})})},g="https://agile-garden-69829.herokuapp.com";var N=function(){var e=Object(a.useState)((function(){return!1})),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)((function(){return[]})),i=Object(o.a)(c,2),d=i[0],j=i[1],b=Object(a.useState)((function(){})),m=Object(o.a)(b,2),p=m[0],x=m[1],O=function(){var e=Object(l.a)(s.a.mark((function e(n,t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(n),r(!0),e.next=4,h.a.get("".concat(g,"/api/users/").concat(t));case 4:a=e.sent,x(a.data),console.log("clicked here"),console.log(a.data);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(g,"/api/users/allmail/").concat(p.username));case 2:n=e.sent,console.log(d),console.log(n.data),j(n.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(u.jsx)(f,{refreshHandler:N,user:p,userMail:d}):t?void 0:Object(u.jsx)(v,{loginClickHandler:O})};c.a.render(Object(u.jsx)(N,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.eeb5674a.chunk.js.map